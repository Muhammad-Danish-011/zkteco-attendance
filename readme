# ZKTeco Attendance â€“ Windows + PM2 (README)

This guide explains **step-by-step** how to run and auto-start the ZKTeco attendance app on **Windows** using **PM2 + Task Scheduler**.

---

## âœ… Requirements

* Windows 10 / 11
* Node.js (LTS version)
* Internet access (for npm install)

---

## 1ï¸âƒ£ Install Node.js

Install Node.js **LTS** from the official website.

After installation, verify:

```bat
node -v
npm -v
```

---

## 2ï¸âƒ£ Project Folder Setup

Create the folder:

```
Desktop\zkteco-attendance
```

Inside this folder, place the following **required files**:

* `app.js`
* `package.json`

> âŒ `auto-start.bat` is **not required** when using PM2 + Task Scheduler

---

## 3ï¸âƒ£ Install Dependencies

Open **Command Prompt (Normal)** and run:

```bat
cd Desktop\zkteco-attendance
npm install
```

---

## 4ï¸âƒ£ Install PM2

```bat
npm install -g pm2
```

Verify installation:

```bat
pm2 -v
```

---

## 5ï¸âƒ£ Start App with PM2

```bat
pm2 start app.js --name zkteco-service
```

Check status:

```bat
pm2 list
```

---

## 6ï¸âƒ£ Save PM2 Process List (IMPORTANT)

```bat
pm2 save
```

This creates the file:

```
C:\Users\Ahmed\.pm2\dump.pm2
```

---

## ðŸš« IMPORTANT (Windows Users)

The following commands **DO NOT work on Windows**:

```bat
pm2 startup
pm2-windows-startup
```

âœ… Windows **must** use **Task Scheduler**.

---

## 7ï¸âƒ£ Auto Start with Windows Task Scheduler

### Open Task Scheduler

* Press **Win + R**
* Type:

```
taskschd.msc
```

* Click **Create Task** (NOT Create Basic Task)

---

### ðŸ”¹ General Tab

* Name: `PM2 Auto Start`
* âœ… Run whether user is logged on or not
* âœ… Run with highest privileges

---

### ðŸ”¹ Triggers Tab

* Click **New**
* Begin the task: **At startup**
* Click **OK**

---

### ðŸ”¹ Actions Tab (MOST IMPORTANT)

Click **New** and set:

**Program/script**

```
C:\Program Files\nodejs\node.exe
```

**Add arguments**

```
C:\Users\Ahmed\AppData\Roaming\npm\node_modules\pm2\bin\pm2 resurrect
```

**Start in**

```
C:\Users\Ahmed
```

> âœ… Only `pm2 resurrect` should be used here

---

### ðŸ”¹ Conditions Tab

* âŒ Uncheck: `Start the task only if the computer is on AC power`

---

### ðŸ”¹ Settings Tab

* âœ… Allow task to be run on demand
* âœ… Restart if the task fails
* âŒ stop the task if its run longer than 


---

### Save Task

* Click **OK**
* Enter Windows user password

---

## 8ï¸âƒ£ Testing

### Test without restart

* In Task Scheduler â†’ Right-click **PM2 Auto Start** â†’ **Run**
* Open CMD:

```bat
pm2 list
```

âœ… `zkteco-service` should be running

---

### Final Test (Mandatory)

* Restart the PC
* Open CMD and run:

```bat
pm2 list
```

âœ… App auto-starts successfully

---

## âœ… Useful PM2 Commands (Manual Use)

| Purpose      | Command                      |
| ------------ | ---------------------------- |
| Restart app  | `pm2 restart zkteco-service` |
| Stop app     | `pm2 stop zkteco-service`    |
| Check status | `pm2 list`                   |
| Save changes | `pm2 save`                   |

---

## âœ… Final Rule

> **Windows + PM2 = Task Scheduler + `pm2 resurrect`**

This setup is stable, production-safe, and recommended for ZKTeco attendance systems.

---

âœ… END OF README
